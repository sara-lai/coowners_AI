<% if @properties.present? %>

  <div style='display:flex; justify-content:center; padding:20px; max-width:1200px; width:100%; margin:0 auto;'>

    <div width='100%'>

      <h1 style='margin-bottom:40px'>Your Properties (<%= @properties.length %>)</h1>

      <div style="display: grid;
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: 24px;
            justify-items: center;
            max-width: 1100px;
            margin: 0 auto;">


        <% @properties.each do |property| %>

          <div class='card mb-3 shadow-sm rounded' style='width:100%; max-width:440px;'>

            <div class='card-body bg-light' style='min-height:400px;'>

              <%= link_to property_path(property), class: "text-decoration-none text-reset" do %>

                <%# https://uikit.lewagon.com/documentation#card_category %>
                <div class="card-category mb-4" style="height:260px; background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('<%= property.photo.attached? ? cl_image_path(property.photo.key, height: 300, crop: :fill) : asset_path("default-placeholder.png") %>')">
                  <p style='font-size:1.5rem;'><%= property.name %></p>
                </div>

                <p><%= property.address %></p>

              <% end %>

              <p style='font-size:1.2rem; letter-spacing:1px;'>Documents </p>
              <% if property.documents.attached? %>
                <div style='display:flex; flex-direction:column; gap:10px;' >
                  <% property.documents.each do |document| %>
                    <div>
                      <%= link_to document.filename.to_s, url_for(document), target: "_blank" %>
                    </div>
                  <% end %>
                </div>
              <% else %>
                <p>No documents uploaded yet.</p>
              <% end %>

              <%= link_to edit_property_path(property), class: 'btn mt-2' do %>
                <i class="fas fa-edit"></i> Add Documents
              <% end %>

            </div>

            <div class='card-footer bg-white' style='text-align:center;'>
              <div style='display:flex; gap:10px; '>
              <%= button_to property_chats_path(property), class: 'btn' do %>
                <i class="fas fa-robot"></i> Launch AI Assistant
              <% end %>
              </div>
            </div>

          </div>
        <% end %>
      </div>

    </div>

  </div>

<% else %>
  <div style='display:flex; justify-content:center;align-items:center; height:80vh;'>
    <div style='text-align:center;'>
      <h1 class='mb-4' >Welcome, let's get started </h1>
      <%= link_to "Add your first property", new_property_path, class: "btn btn-primary btn-lg" %>
    </div>
  </div>
<% end %>
